<!DOCTYPE html>
<html>
  <head>
    <title>HerHaven Icon Generator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      .container {
        margin: 20px 0;
      }
      button {
        padding: 10px 20px;
        background: #9c27b0;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }
      button:hover {
        background: #7b2cbf;
      }
      #status {
        margin-top: 20px;
        padding: 10px;
        border-radius: 5px;
      }
      .success {
        background: #4caf50;
        color: white;
      }
      .info {
        background: #2196f3;
        color: white;
      }
      canvas {
        display: none;
      }
      .preview {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 20px;
      }
      .preview-item {
        text-align: center;
      }
      .preview-item img {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 5px;
      }
      .preview-item p {
        margin: 5px 0;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <h1>HerHaven PWA Icon Generator</h1>
    <div class="container">
      <p>
        This tool generates all required PWA icons for HerHaven in the correct
        sizes.
      </p>
      <button onclick="generateAllIcons()">Generate All Icons</button>
      <div id="status"></div>
      <div id="preview" class="preview"></div>
    </div>
    <canvas id="canvas"></canvas>

    <script>
      const logo = `<svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.8207 0.00151062C21.0215 0.0778313 17.7864 2.6371 16.6009 6.1267C16.6052 6.11387 16.6081 6.10076 16.6124 6.0879C15.9794 5.83808 15.3013 5.69844 14.6041 5.69844H5.69818V14.6045C5.69818 15.3042 5.83873 15.9849 6.09056 16.6199C6.09489 16.6185 6.09923 16.6174 6.10356 16.616C4.77258 17.0747 3.54552 17.836 2.54684 18.8539C0.859955 20.5708 -0.0436875 22.8117 0.00162501 25.1702C0.0759009 28.9966 2.61685 32.2519 6.07452 33.422C5.83298 34.0458 5.69818 34.7121 5.69818 35.3967V44.3025H14.6041C15.2854 44.3025 15.949 44.169 16.57 43.9294C16.5664 43.9186 16.5639 43.907 16.5603 43.8962C16.9891 45.2016 17.7188 46.3982 18.7184 47.3959C20.393 49.0765 22.6251 50.0016 24.9984 50.0016C25.0588 50.0016 25.1189 49.9987 25.1791 49.9987C28.9644 49.9247 32.1919 47.3846 33.389 43.9135C34.0218 44.1632 34.6994 44.3025 35.3963 44.3025H44.3022V35.3967C44.3022 34.6971 44.1617 34.0169 43.91 33.3819C45.2357 32.922 46.4574 32.1611 47.4532 31.146C49.1399 29.4292 50.0435 27.1883 49.9984 24.8298C49.9239 20.9976 47.372 17.7369 43.9046 16.5736C43.9114 16.5758 43.9187 16.5773 43.9255 16.5797C44.1672 15.9559 44.3022 15.2893 44.3022 14.6045V5.69844H35.3963C34.7149 5.69844 34.0518 5.83199 33.4307 6.07113C32.9999 4.77849 32.2738 3.59451 31.2845 2.60698C29.6048 0.92421 27.3815 -3.8147e-06 24.9915 -3.8147e-05C24.9346 -3.8147e-05 24.8778 0.000453949 24.8207 0.00151062ZM3.01068 25.1159C2.98341 23.5739 3.58286 22.0978 4.69429 20.9653C5.842 19.7967 7.42928 19.128 9.05268 19.128H14.5827C17.0889 19.128 19.1281 17.0889 19.1281 14.5828V9.05277C19.1281 5.7847 21.7094 3.07694 24.881 3.01356H24.9984C26.5707 3.01356 28.0436 3.62211 29.152 4.73656C30.2635 5.84186 30.875 7.31479 30.875 8.8872V15.2125H33.8869V9.22684C34.3168 8.89457 34.8457 8.71032 35.3963 8.71032H41.2901V14.6045C41.2901 15.1554 41.1057 15.6849 40.7731 16.115H41.1145C41.135 16.115 41.1548 16.1173 41.175 16.1174C41.1554 16.1174 41.1357 16.1161 41.1158 16.1161H34.7907H33.8869H30.875H29.9714H26.6582C20.8449 16.1161 16.116 20.845 16.116 26.6581V29.9713H19.1281V26.6581C19.1281 22.5047 22.5045 19.128 26.6582 19.128H29.9714H30.875H33.8869H34.7907H41.1158C44.2906 19.128 46.926 21.7124 46.9894 24.887C47.0164 26.4292 46.42 27.9021 45.3055 29.0347C44.158 30.2033 42.5707 30.8749 40.9502 30.8749H35.4171C32.9112 30.8749 30.875 32.911 30.875 35.4171V40.9471C30.875 44.2152 28.2937 46.9233 25.1189 46.9864L24.9984 46.9896C23.4293 46.9896 21.9563 46.3776 20.8478 45.2665C19.7364 44.1581 19.1281 42.6853 19.1281 41.1158V34.7906H16.116V41.1158C16.116 41.142 16.1177 41.1681 16.1179 41.194C16.1176 41.1675 16.1147 41.1417 16.1147 41.1149V40.7732C15.6847 41.1058 15.155 41.2905 14.6041 41.2905H8.71008V35.3967C8.71008 34.8462 8.8945 34.3169 9.22677 33.887H15.2124H16.116H19.1281H20.0317H23.3448C29.1551 33.887 33.8869 29.1581 33.8869 23.345V20.0316H30.875V23.345C30.875 27.4955 27.4954 30.8749 23.3448 30.8749H20.0317H19.1281H16.116H15.2124H8.88707C5.70938 30.8749 3.07378 28.2907 3.01068 25.1159ZM9.05144 16.115H9.22695C8.89451 15.6849 8.71008 15.1558 8.71008 14.6045V8.71032H14.6041C15.1553 8.71032 15.6847 8.89457 16.1147 9.22719V9.05312C16.1147 9.02835 16.1174 9.00426 16.1178 8.97949C16.1174 9.00408 16.116 9.02818 16.116 9.05277V14.5828C16.116 15.4293 15.4292 16.1161 14.5827 16.1161H9.05268C9.0314 16.1161 9.01015 16.1174 8.98883 16.1177C9.00973 16.1174 9.03034 16.115 9.05144 16.115ZM33.8869 40.7746V35.4171C33.8869 34.5738 34.5737 33.887 35.4171 33.887H40.7738C41.106 34.3169 41.2901 34.846 41.2901 35.3967V41.2905H35.3963C34.8454 41.2905 34.3167 41.1066 33.8869 40.7746Z" fill="#CB30E0"/>
</svg>`;

      async function generateAllIcons() {
        const statusDiv = document.getElementById("status");
        const previewDiv = document.getElementById("preview");
        statusDiv.className = "info";
        statusDiv.textContent = "Generating icons...";
        previewDiv.innerHTML = "";

        // PWA icon sizes
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        let generated = 0;

        for (const size of sizes) {
          await generateIcon(
            size,
            `icon-${size}x${size}.png`,
            "#FFFFFF",
            previewDiv
          );
          generated++;
        }

        // Generate maskable icons with padding
        await generateMaskableIcon(
          192,
          "manifest-icon-192.maskable.png",
          previewDiv
        );
        await generateMaskableIcon(
          512,
          "manifest-icon-512.maskable.png",
          previewDiv
        );
        generated += 2;

        statusDiv.className = "success";
        statusDiv.textContent = `✓ Successfully generated ${generated} icons! Check your downloads folder.`;
      }

      async function generateIcon(size, filename, bgColor, previewDiv) {
        const canvas = document.getElementById("canvas");
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext("2d");

        // Background
        ctx.fillStyle = bgColor;
        ctx.fillRect(0, 0, size, size);

        // Load and draw SVG
        const img = new Image();
        const svgBlob = new Blob([logo], { type: "image/svg+xml" });
        const url = URL.createObjectURL(svgBlob);

        return new Promise((resolve) => {
          img.onload = () => {
            // Calculate scaling to fit icon with padding
            const padding = size * 0.1;
            const availableSize = size - padding * 2;
            const scale = availableSize / 50; // 50 is the SVG viewBox size

            const scaledWidth = 50 * scale;
            const scaledHeight = 50 * scale;
            const x = (size - scaledWidth) / 2;
            const y = (size - scaledHeight) / 2;

            ctx.drawImage(img, x, y, scaledWidth, scaledHeight);
            URL.revokeObjectURL(url);

            // Download
            canvas.toBlob((blob) => {
              const downloadUrl = URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.href = downloadUrl;
              a.download = filename;
              a.click();
              URL.revokeObjectURL(downloadUrl);

              // Add preview
              const previewItem = document.createElement("div");
              previewItem.className = "preview-item";
              const previewImg = document.createElement("img");
              previewImg.src = canvas.toDataURL();
              previewImg.style.width = "96px";
              previewImg.style.height = "96px";
              const label = document.createElement("p");
              label.textContent = `${size}×${size}`;
              previewItem.appendChild(previewImg);
              previewItem.appendChild(label);
              previewDiv.appendChild(previewItem);

              resolve();
            });
          };
          img.src = url;
        });
      }

      async function generateMaskableIcon(size, filename, previewDiv) {
        const canvas = document.getElementById("canvas");
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext("2d");

        ctx.clearRect(0, 0, size, size);

        const img = new Image();
        const svgBlob = new Blob([logo], { type: "image/svg+xml" });
        const url = URL.createObjectURL(svgBlob);

        return new Promise((resolve) => {
          img.onload = () => {
            // Maskable icons need 40% safe area (20% padding on each side)
            const padding = size * 0.2;
            const availableSize = size - padding * 2;
            const scale = availableSize / 50;

            const scaledWidth = 50 * scale;
            const scaledHeight = 50 * scale;
            const x = (size - scaledWidth) / 2;
            const y = (size - scaledHeight) / 2;

            // Draw logo with transparent background
            ctx.drawImage(img, x, y, scaledWidth, scaledHeight);
            URL.revokeObjectURL(url);

            // Download
            canvas.toBlob((blob) => {
              const downloadUrl = URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.href = downloadUrl;
              a.download = filename;
              a.click();
              URL.revokeObjectURL(downloadUrl);

              // Add preview
              const previewItem = document.createElement("div");
              previewItem.className = "preview-item";
              const previewImg = document.createElement("img");
              previewImg.src = canvas.toDataURL();
              previewImg.style.width = "96px";
              previewImg.style.height = "96px";
              const label = document.createElement("p");
              label.textContent = `${size}×${size} (maskable)`;
              previewItem.appendChild(previewImg);
              previewItem.appendChild(label);
              previewDiv.appendChild(previewItem);

              resolve();
            });
          };
          img.src = url;
        });
      }
    </script>
  </body>
</html>
